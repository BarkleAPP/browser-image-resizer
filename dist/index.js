function p(e,t,n){let r=[];for(let i=0;i<n&&t+i<e.byteLength;i++)r.push(e.getUint8(t+i));return X(r)}function Ne(e,t,n){let r=[];for(let i=0;i<n&&t+i<e.byteLength;i+=2)r.push(e.getUint16(t+i));return X(r)}function X(e){return e.map(t=>String.fromCharCode(t)).join("")}function h(){for(let e=1;e<arguments.length;e++)for(let t in arguments[e])arguments[0][t]=arguments[e][t];return arguments[0]}function z(e,t,n){let r=!1;Object.defineProperty(e,t,{get(){return r||(r=!0,Object.defineProperty(e,t,{configurable:!0,enumerable:!0,value:n.apply(e),writable:!0})),e[t]},configurable:!0,enumerable:!0})}function W(e){if(typeof btoa<"u")return btoa(Array.prototype.reduce.call(new Uint8Array(e),(t,n)=>t+String.fromCharCode(n),""));if(!(typeof Buffer>"u"))return typeof Buffer.from!==void 0?Buffer.from(e).toString("base64"):new Buffer(e).toString("base64")}var K=class{constructor(t){if(Qt(t))throw new Error("DataView: Passed buffer type is unsupported.");this.buffer=t,this.byteLength=this.buffer.length}getUint8(t){return this.buffer.readUInt8(t)}getUint16(t,n){return n?this.buffer.readUInt16LE(t):this.buffer.readUInt16BE(t)}getUint32(t,n){return n?this.buffer.readUInt32LE(t):this.buffer.readUInt32BE(t)}getInt32(t,n){return n?this.buffer.readInt32LE(t):this.buffer.readInt32BE(t)}};function Qt(e){return typeof e!="object"||e.length===void 0||e.readUInt8===void 0||e.readUInt16LE===void 0||e.readUInt16BE===void 0||e.readUInt32LE===void 0||e.readUInt32BE===void 0||e.readInt32LE===void 0||e.readInt32BE===void 0}var l={USE_FILE:!0,USE_JFIF:!0,USE_PNG_FILE:!0,USE_EXIF:!0,USE_IPTC:!0,USE_XMP:!0,USE_ICC:!0,USE_MPF:!0,USE_THUMBNAIL:!0,USE_TIFF:!0,USE_JPEG:!0,USE_PNG:!0,USE_HEIC:!0,USE_WEBP:!0};function I(e){return e.map(t=>String.fromCharCode(t)).join("")}function R(e){if(e.length>=8){let t=I(e.slice(0,8));if(t==="ASCII\0\0\0")return I(e.slice(8));if(t==="JIS\0\0\0\0\0")return"[JIS encoded text]";if(t==="UNICODE\0")return"[Unicode encoded text]";if(t==="\0\0\0\0\0\0\0\0")return"[Undefined encoding]"}return"Undefined"}function O(e){return e[0][0]/e[0][1]+e[1][0]/e[1][1]/60+e[2][0]/e[2][1]/3600}var b={BIG_ENDIAN:19789,LITTLE_ENDIAN:18761,getByteOrder:$t};function $t(e,t){if(e.getUint16(t)===18761)return 18761;if(e.getUint16(t)===19789)return 19789;throw new Error("Illegal byte order value. Faulty image.")}var ee={isTiffFile:Jt,findTiffOffsets:vt};function Jt(e){return!!e&&e.byteLength>=4&&qt(e)}function qt(e){let r=e.getUint16(0)===b.LITTLE_ENDIAN;return e.getUint16(2,r)===42}function vt(){return l.USE_EXIF?{hasAppMarkers:!0,tiffHeaderOffset:0}:{}}var re={isJpegFile:pn,findJpegOffsets:En},Vt=2,en=65496,ye=2,C=4,T=2,tn=2,nn=10,rn=18,Oe=33,Ue=79,Re=18,on=8,te="ICC_PROFILE\0",Ge=C+te.length,sn=Ge+1,De="MPF\0",ke=65472,we=65474,un=65476,cn=65499,an=65501,fn=65498,He=65504,ie=65505,Ze=65506,ln=65517,dn=65519,mn=65534,gn="JFIF",ne="Exif",Me="http://ns.adobe.com/xap/1.0/\0",Le="http://ns.adobe.com/xmp/extension/\0",Be="Photoshop 3.0";function pn(e){return!!e&&e.byteLength>=Vt&&e.getUint16(0)===en}function En(e){let t=ye,n,r,i,o,s,u,f,d,c;for(;t+C+5<=e.byteLength;){if(l.USE_FILE&&xn(e,t))r=t+T;else if(l.USE_FILE&&Sn(e,t))i=t+T;else if(l.USE_JFIF&&An(e,t))n=e.getUint16(t+T),o=t+tn;else if(l.USE_EXIF&&Tn(e,t))n=e.getUint16(t+T),s=t+nn;else if(l.USE_XMP&&Fn(e,t))f||(f=[]),n=e.getUint16(t+T),f.push(Pn(t,n));else if(l.USE_XMP&&Cn(e,t))f||(f=[]),n=e.getUint16(t+T),f.push(Nn(t,n));else if(l.USE_IPTC&&yn(e,t))n=e.getUint16(t+T),u=t+rn;else if(l.USE_ICC&&hn(e,t)){n=e.getUint16(t+T);let g=t+Re,x=n-(Re-T),E=e.getUint8(t+Ge),m=e.getUint8(t+sn);d||(d=[]),d.push({offset:g,length:x,chunkNumber:E,chunksTotal:m})}else if(l.USE_MPF&&In(e,t))n=e.getUint16(t+T),c=t+on;else if(On(e,t))n=e.getUint16(t+T);else break;t+=T+n}return{hasAppMarkers:t>ye,fileDataOffset:r||i,jfifDataOffset:o,tiffHeaderOffset:s,iptcDataOffset:u,xmpChunks:f,iccChunks:d,mpfDataOffset:c}}function xn(e,t){return e.getUint16(t)===ke}function Sn(e,t){return e.getUint16(t)===we}function hn(e,t){let n=te.length;return e.getUint16(t)===Ze&&p(e,t+C,n)===te}function In(e,t){let n=De.length;return e.getUint16(t)===Ze&&p(e,t+C,n)===De}function An(e,t){let n=ne.length;return e.getUint16(t)===He&&p(e,t+C,n)===gn&&e.getUint8(t+C+n)===0}function Tn(e,t){let n=ne.length;return e.getUint16(t)===ie&&p(e,t+C,n)===ne&&e.getUint8(t+C+n)===0}function Fn(e,t){return e.getUint16(t)===ie&&_n(e,t)}function _n(e,t){let n=Me.length;return p(e,t+C,n)===Me}function Cn(e,t){return e.getUint16(t)===ie&&bn(e,t)}function bn(e,t){let n=Le.length;return p(e,t+C,n)===Le}function Pn(e,t){return{dataOffset:e+Oe,length:t-(Oe-T)}}function Nn(e,t){return{dataOffset:e+Ue,length:t-(Ue-T)}}function yn(e,t){let n=Be.length;return e.getUint16(t)===ln&&p(e,t+C,n)===Be&&e.getUint8(t+C+n)===0}function On(e,t){let n=e.getUint16(t);return n>=He&&n<=dn||n===mn||n===ke||n===we||n===un||n===cn||n===an||n===fn}var ue={isPngFile:Un,findPngOffsets:Rn},oe=`\x89PNG\r

`,j=4,D=4,Xe=0,ze=j,Y=j+D,se="XML:com.adobe.xmp\0";function Un(e){return!!e&&p(e,0,oe.length)===oe}function Rn(e){let n={hasAppMarkers:!1},r=oe.length;for(;r+j+D<=e.byteLength;){if(l.USE_PNG_FILE&&Dn(e,r))n.hasAppMarkers=!0,n.pngHeaderOffset=r+Y;else if(l.USE_XMP&&Mn(e,r)){let i=Ln(e,r);i!==void 0&&(n.hasAppMarkers=!0,n.xmpChunks=[{dataOffset:i,length:e.getUint32(r+Xe)-(i-(r+Y))}])}r+=e.getUint32(r+Xe)+j+D+4}return n}function Dn(e,t){let n="IHDR";return p(e,t+ze,D)===n}function Mn(e,t){let n="iTXt";return p(e,t+ze,D)===n&&p(e,t+Y,se.length)===se}function Ln(e,t){t+=Y+se.length+1+1;let i=0;for(;i<2&&t<e.byteLength;)e.getUint8(t)===0&&i++,t++;if(!(i<2))return t}var ce={isHeicFile:Bn,findHeicOffsets:Gn};function Bn(e){if(!e)return!1;let t="ftyp",n=4,r=["heic","heix","hevc","hevx","heim","heis","hevm","hevs","mif1"],i=4,o=p(e,n+t.length,i);return p(e,n,t.length)===t&&r.indexOf(o)!==-1}function Gn(e){if(l.USE_EXIF||l.USE_ICC){let{offset:t,length:n}=kn(e);if(t===void 0)return{hasAppMarkers:!1};let r=Math.min(t+n,e.byteLength),{exifItemOffset:i,ilocOffset:o,colrOffset:s}=Xn(e,t,r),u=zn(e,i,o,r),f=Wn(e,s,r);return{hasAppMarkers:u!==void 0||f!==void 0,tiffHeaderOffset:u,iccChunks:f}}return{hasAppMarkers:!1}}function kn(e){let o=0;for(;o+4+4<=e.byteLength;){let s=We(e,o);if(s>=8&&p(e,o+4,4)==="meta")return{offset:o,length:s};o+=s}return{offset:void 0,length:0}}function We(e,t){let r=e.getUint32(t);return wn(r)?e.byteLength-t:Hn(r)&&Zn(e,t)?e.getUint32(t+12):r}function wn(e){return e===0}function Hn(e){return e===1}function Zn(e,t){return e.getUint32(t+8)===0}function Xn(e,t,n){let o={ilocOffset:void 0,exifItemOffset:void 0,colrOffset:void 0};for(;t+4<=n&&(!o.ilocOffset||!o.exifItemOffset||!o.colrOffset);){let s=p(e,t,4);l.USE_EXIF&&s==="iloc"?o.ilocOffset=t:l.USE_EXIF&&s==="Exif"?o.exifItemOffset=t+-4:l.USE_ICC&&s==="colr"&&(o.colrOffset=t+-4),t++}return o}function zn(e,t,n,r){if(!n||!t||t+2>r)return;let c=e.getUint16(t);for(n+=12;n+16<=r;){if(e.getUint16(n)===c){let x=e.getUint32(n+8);if(x+4<=e.byteLength){let m=e.getUint32(x)+4;return x+m}}n+=16}}function Wn(e,t,n){if(!t||t+12>n)return;let s=p(e,t+8,4);if(!(s!=="prof"&&s!=="rICC"))return[{offset:t+12,length:We(e,t)-12,chunkNumber:1,chunksTotal:1}]}var ae={isWebpFile:Kn,findOffsets:jn};function Kn(e){let n="RIFF",i="WEBP";return!!e&&p(e,0,n.length)===n&&p(e,8,i.length)===i}function jn(e){let r="Exif\0\0",o=12,s=!1,u,f,d;for(;o+8<e.byteLength;){let c=p(e,o,4),g=e.getUint32(o+4,!0);l.USE_EXIF&&c==="EXIF"?(s=!0,p(e,o+8,r.length)===r?u=o+8+r.length:u=o+8):l.USE_XMP&&c==="XMP "?(s=!0,f=[{dataOffset:o+8,length:g}]):l.USE_ICC&&c==="ICCP"&&(s=!0,d=[{offset:o+8,length:g,chunkNumber:1,chunksTotal:1}]),o+=8+(g%2===0?g:g+1)}return{hasAppMarkers:s,tiffHeaderOffset:u,xmpChunks:f,iccChunks:d}}var Ke={parseAppMarkers:Yn};function Yn(e){if(l.USE_TIFF&&ee.isTiffFile(e))return ee.findTiffOffsets();if(l.USE_JPEG&&re.isJpegFile(e))return re.findJpegOffsets(e);if(l.USE_PNG&&ue.isPngFile(e))return ue.findPngOffsets(e);if(l.USE_HEIC&&ce.isHeicFile(e))return ce.findHeicOffsets(e);if(l.USE_WEBP&&ae.isWebpFile(e))return ae.findOffsets(e);throw new Error("Invalid image format")}var je={1:1,2:1,3:2,4:4,5:8,7:1,9:4,10:8,13:4},fe={BYTE:1,ASCII:2,SHORT:3,LONG:4,RATIONAL:5,UNDEFINED:7,SLONG:9,SRATIONAL:10,IFD:13},a={getAsciiValue:Qn,getByteAt:Ye,getAsciiAt:$n,getShortAt:Jn,getLongAt:Q,getRationalAt:qn,getUndefinedAt:vn,getSlongAt:le,getSrationalAt:Vn,getIfdPointerAt:er,typeSizes:je,tagTypes:fe,getTypeSize:tr};function Qn(e){return e.map(t=>String.fromCharCode(t))}function Ye(e,t){return e.getUint8(t)}function $n(e,t){return e.getUint8(t)}function Jn(e,t,n){return e.getUint16(t,n===b.LITTLE_ENDIAN)}function Q(e,t,n){return e.getUint32(t,n===b.LITTLE_ENDIAN)}function qn(e,t,n){return[Q(e,t,n),Q(e,t+4,n)]}function vn(e,t){return Ye(e,t)}function le(e,t,n){return e.getInt32(t,n===b.LITTLE_ENDIAN)}function Vn(e,t,n){return[le(e,t,n),le(e,t+4,n)]}function er(e,t,n){return Q(e,t,n)}function tr(e){if(fe[e]===void 0)throw new Error("No such type found.");return je[fe[e]]}var M={LightSource:e=>e===1?"Daylight":e===2?"Fluorescent":e===3?"Tungsten (incandescent light)":e===4?"Flash":e===9?"Fine weather":e===10?"Cloudy weather":e===11?"Shade":e===12?"Daylight fluorescent (D 5700 \u2013 7100K)":e===13?"Day white fluorescent (N 4600 \u2013 5400K)":e===14?"Cool white fluorescent (W 3900 \u2013 4500K)":e===15?"White fluorescent (WW 3200 \u2013 3700K)":e===17?"Standard light A":e===18?"Standard light B":e===19?"Standard light C":e===20?"D55":e===21?"D65":e===22?"D75":e===23?"D50":e===24?"ISO studio tungsten":e===255?"Other light source":"Unknown"};var Qe={11:"ProcessingSoftware",254:{name:"SubfileType",description:e=>({0:"Full-resolution image",1:"Reduced-resolution image",2:"Single page of multi-page image",3:"Single page of multi-page reduced-resolution image",4:"Transparency mask",5:"Transparency mask of reduced-resolution image",6:"Transparency mask of multi-page image",7:"Transparency mask of reduced-resolution multi-page image",65537:"Alternate reduced-resolution image",4294967295:"Invalid"})[e]||"Unknown"},255:{name:"OldSubfileType",description:e=>({0:"Full-resolution image",1:"Reduced-resolution image",2:"Single page of multi-page image"})[e]||"Unknown"},256:"ImageWidth",257:"ImageLength",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",263:{name:"Thresholding",description:e=>({1:"No dithering or halftoning",2:"Ordered dither or halfton",3:"Randomized dither"})[e]||"Unknown"},264:"CellWidth",265:"CellLength",266:{name:"FillOrder",description:e=>({1:"Normal",2:"Reversed"})[e]||"Unknown"},269:"DocumentName",270:"ImageDescription",271:"Make",272:"Model",273:"StripOffsets",274:{name:"Orientation",description:e=>e===1?"top-left":e===2?"top-right":e===3?"bottom-right":e===4?"bottom-left":e===5?"left-top":e===6?"right-top":e===7?"right-bottom":e===8?"left-bottom":"Undefined"},277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",280:"MinSampleValue",281:"MaxSampleValue",282:{name:"XResolution",description:e=>""+Math.round(e[0]/e[1])},283:{name:"YResolution",description:e=>""+Math.round(e[0]/e[1])},284:"PlanarConfiguration",285:"PageName",286:{name:"XPosition",description:e=>""+Math.round(e[0]/e[1])},287:{name:"YPosition",description:e=>""+Math.round(e[0]/e[1])},290:{name:"GrayResponseUnit",description:e=>({1:"0.1",2:"0.001",3:"0.0001",4:"1e-05",5:"1e-06"})[e]||"Unknown"},296:{name:"ResolutionUnit",description:e=>e===2?"inches":e===3?"centimeters":"Unknown"},297:"PageNumber",301:"TransferFunction",305:"Software",306:"DateTime",315:"Artist",316:"HostComputer",317:"Predictor",318:{name:"WhitePoint",description:e=>e.map(t=>`${t[0]}/${t[1]}`).join(", ")},319:{name:"PrimaryChromaticities",description:e=>e.map(t=>`${t[0]}/${t[1]}`).join(", ")},321:"HalftoneHints",322:"TileWidth",323:"TileLength",330:"A100DataOffset",332:{name:"InkSet",description:e=>({1:"CMYK",2:"Not CMYK"})[e]||"Unknown"},337:"TargetPrinter",338:{name:"ExtraSamples",description:e=>({0:"Unspecified",1:"Associated Alpha",2:"Unassociated Alpha"})[e]||"Unknown"},339:{name:"SampleFormat",description:e=>{let t={1:"Unsigned",2:"Signed",3:"Float",4:"Undefined",5:"Complex int",6:"Complex float"};return Array.isArray(e)?e.map(n=>t[n]||"Unknown").join(", "):"Unknown"}},513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",529:{name:"YCbCrCoefficients",description:e=>e.map(t=>""+t[0]/t[1]).join("/")},530:"YCbCrSubSampling",531:{name:"YCbCrPositioning",description:e=>e===1?"centered":e===2?"co-sited":"undefined "+e},532:{name:"ReferenceBlackWhite",description:e=>e.map(t=>""+t[0]/t[1]).join(", ")},700:"ApplicationNotes",18246:"Rating",18249:"RatingPercent",33432:{name:"Copyright",description:e=>e.join("; ")},33550:"PixelScale",33723:"IPTC-NAA",33920:"IntergraphMatrix",33922:"ModelTiePoint",34118:"SEMInfo",34264:"ModelTransform",34377:"PhotoshopSettings",34665:"Exif IFD Pointer",34675:"ICC_Profile",34735:"GeoTiffDirectory",34736:"GeoTiffDoubleParams",34737:"GeoTiffAsciiParams",34853:"GPS Info IFD Pointer",40091:"XPTitle",40092:"XPComment",40093:"XPAuthor",40094:"XPKeywords",40095:"XPSubject",42112:"GDALMetadata",42113:"GDALNoData",50341:"PrintIM",50707:"DNGBackwardVersion",50708:"UniqueCameraModel",50709:"LocalizedCameraModel",50721:"ColorMatrix1",50722:"ColorMatrix2",50723:"CameraCalibration1",50724:"CameraCalibration2",50725:"ReductionMatrix1",50726:"ReductionMatrix2",50727:"AnalogBalance",50728:"AsShotNeutral",50729:"AsShotWhiteXY",50730:"BaselineExposure",50731:"BaselineNoise",50732:"BaselineSharpness",50734:"LinearResponseLimit",50735:"CameraSerialNumber",50736:"DNGLensInfo",50739:"ShadowScale",50741:{name:"MakerNoteSafety",description:e=>({0:"Unsafe",1:"Safe"})[e]||"Unknown"},50778:{name:"CalibrationIlluminant1",description:M.LightSource},50779:{name:"CalibrationIlluminant2",description:M.LightSource},50781:"RawDataUniqueID",50827:"OriginalRawFileName",50828:"OriginalRawFileData",50831:"AsShotICCProfile",50832:"AsShotPreProfileMatrix",50833:"CurrentICCProfile",50834:"CurrentPreProfileMatrix",50879:"ColorimetricReference",50885:"SRawType",50898:"PanasonicTitle",50899:"PanasonicTitle2",50931:"CameraCalibrationSig",50932:"ProfileCalibrationSig",50933:"ProfileIFD",50934:"AsShotProfileName",50936:"ProfileName",50937:"ProfileHueSatMapDims",50938:"ProfileHueSatMapData1",50939:"ProfileHueSatMapData2",50940:"ProfileToneCurve",50941:{name:"ProfileEmbedPolicy",description:e=>({0:"Allow Copying",1:"Embed if Used",2:"Never Embed",3:"No Restrictions"})[e]||"Unknown"},50942:"ProfileCopyright",50964:"ForwardMatrix1",50965:"ForwardMatrix2",50966:"PreviewApplicationName",50967:"PreviewApplicationVersion",50968:"PreviewSettingsName",50969:"PreviewSettingsDigest",50970:{name:"PreviewColorSpace",description:e=>({1:"Gray Gamma 2.2",2:"sRGB",3:"Adobe RGB",4:"ProPhoto RGB"})[e]||"Unknown"},50971:"PreviewDateTime",50972:"RawImageDigest",50973:"OriginalRawFileDigest",50981:"ProfileLookTableDims",50982:"ProfileLookTableData",51043:"TimeCodes",51044:"FrameRate",51058:"TStop",51081:"ReelName",51089:"OriginalDefaultFinalSize",51090:"OriginalBestQualitySize",51091:"OriginalDefaultCropSize",51105:"CameraLabel",51107:{name:"ProfileHueSatMapEncoding",description:e=>({0:"Linear",1:"sRGB"})[e]||"Unknown"},51108:{name:"ProfileLookTableEncoding",description:e=>({0:"Linear",1:"sRGB"})[e]||"Unknown"},51109:"BaselineExposureOffset",51110:{name:"DefaultBlackRender",description:e=>({0:"Auto",1:"None"})[e]||"Unknown"},51111:"NewRawImageDigest",51112:"RawToPreviewGain"};var $e={33434:{name:"ExposureTime",description:e=>e[0]!==0?`1/${Math.round(e[1]/e[0])}`:`0/${e[1]}`},33437:{name:"FNumber",description:e=>`f/${e[0]/e[1]}`},34850:{name:"ExposureProgram",description:e=>e===0?"Undefined":e===1?"Manual":e===2?"Normal program":e===3?"Aperture priority":e===4?"Shutter priority":e===5?"Creative program":e===6?"Action program":e===7?"Portrait mode":e===8?"Landscape mode":e===9?"Bulb":"Unknown"},34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:{name:"OECF",description:()=>"[Raw OECF table data]"},34858:"TimeZoneOffset",34859:"SelfTimerMode",34864:{name:"SensitivityType",description:e=>({1:"Standard Output Sensitivity",2:"Recommended Exposure Index",3:"ISO Speed",4:"Standard Output Sensitivity and Recommended Exposure Index",5:"Standard Output Sensitivity and ISO Speed",6:"Recommended Exposure Index and ISO Speed",7:"Standard Output Sensitivity, Recommended Exposure Index and ISO Speed"})[e]||"Unknown"},34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",36864:{name:"ExifVersion",description:e=>I(e)},36867:"DateTimeOriginal",36868:"DateTimeDigitized",36873:"GooglePlusUploadCode",36880:"OffsetTime",36881:"OffsetTimeOriginal",36882:"OffsetTimeDigitized",37121:{name:"ComponentsConfiguration",description:e=>e.map(t=>{if(t===49)return"Y";if(t===50)return"Cb";if(t===51)return"Cr";if(t===52)return"R";if(t===53)return"G";if(t===54)return"B"}).join("")},37122:"CompressedBitsPerPixel",37377:{name:"ShutterSpeedValue",description:e=>`1/${Math.round(Math.pow(2,e[0]/e[1]))}`},37378:{name:"ApertureValue",description:e=>Math.pow(Math.sqrt(2),e[0]/e[1]).toFixed(2)},37379:"BrightnessValue",37380:"ExposureBiasValue",37381:{name:"MaxApertureValue",description:e=>Math.pow(Math.sqrt(2),e[0]/e[1]).toFixed(2)},37382:{name:"SubjectDistance",description:e=>e[0]/e[1]+" m"},37383:{name:"MeteringMode",description:e=>e===1?"Average":e===2?"CenterWeightedAverage":e===3?"Spot":e===4?"MultiSpot":e===5?"Pattern":e===6?"Partial":e===255?"Other":"Unknown"},37384:{name:"LightSource",description:M.LightSource},37385:{name:"Flash",description:e=>e===0?"Flash did not fire":e===1?"Flash fired":e===5?"Strobe return light not detected":e===7?"Strobe return light detected":e===9?"Flash fired, compulsory flash mode":e===13?"Flash fired, compulsory flash mode, return light not detected":e===15?"Flash fired, compulsory flash mode, return light detected":e===16?"Flash did not fire, compulsory flash mode":e===24?"Flash did not fire, auto mode":e===25?"Flash fired, auto mode":e===29?"Flash fired, auto mode, return light not detected":e===31?"Flash fired, auto mode, return light detected":e===32?"No flash function":e===65?"Flash fired, red-eye reduction mode":e===69?"Flash fired, red-eye reduction mode, return light not detected":e===71?"Flash fired, red-eye reduction mode, return light detected":e===73?"Flash fired, compulsory flash mode, red-eye reduction mode":e===77?"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected":e===79?"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected":e===89?"Flash fired, auto mode, red-eye reduction mode":e===93?"Flash fired, auto mode, return light not detected, red-eye reduction mode":e===95?"Flash fired, auto mode, return light detected, red-eye reduction mode":"Unknown"},37386:{name:"FocalLength",description:e=>e[0]/e[1]+" mm"},37393:"ImageNumber",37394:{name:"SecurityClassification",description:e=>({C:"Confidential",R:"Restricted",S:"Secret",T:"Top Secret",U:"Unclassified"})[e]||"Unknown"},37395:"ImageHistory",37396:{name:"SubjectArea",description:e=>e.length===2?`Location; X: ${e[0]}, Y: ${e[1]}`:e.length===3?`Circle; X: ${e[0]}, Y: ${e[1]}, diameter: ${e[2]}`:e.length===4?`Rectangle; X: ${e[0]}, Y: ${e[1]}, width: ${e[2]}, height: ${e[3]}`:"Unknown"},37500:{name:"MakerNote",description:()=>"[Raw maker note data]"},37510:{name:"UserComment",description:R},37520:"SubSecTime",37521:"SubSecTimeOriginal",37522:"SubSecTimeDigitized",37888:{name:"AmbientTemperature",description:e=>e[0]/e[1]+" \xB0C"},37889:{name:"Humidity",description:e=>e[0]/e[1]+" %"},37890:{name:"Pressure",description:e=>e[0]/e[1]+" hPa"},37891:{name:"WaterDepth",description:e=>e[0]/e[1]+" m"},37892:{name:"Acceleration",description:e=>e[0]/e[1]+" mGal"},37893:{name:"CameraElevationAngle",description:e=>e[0]/e[1]+" \xB0"},40960:{name:"FlashpixVersion",description:e=>e.map(t=>String.fromCharCode(t)).join("")},40961:{name:"ColorSpace",description:e=>e===1?"sRGB":e===65535?"Uncalibrated":"Unknown"},40962:"PixelXDimension",40963:"PixelYDimension",40964:"RelatedSoundFile",40965:"Interoperability IFD Pointer",41483:"FlashEnergy",41484:{name:"SpatialFrequencyResponse",description:()=>"[Raw SFR table data]"},41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:{name:"FocalPlaneResolutionUnit",description:e=>e===2?"inches":e===3?"centimeters":"Unknown"},41492:{name:"SubjectLocation",description:([e,t])=>`X: ${e}, Y: ${t}`},41493:"ExposureIndex",41495:{name:"SensingMethod",description:e=>e===1?"Undefined":e===2?"One-chip color area sensor":e===3?"Two-chip color area sensor":e===4?"Three-chip color area sensor":e===5?"Color sequential area sensor":e===7?"Trilinear sensor":e===8?"Color sequential linear sensor":"Unknown"},41728:{name:"FileSource",description:e=>e===3?"DSC":"Unknown"},41729:{name:"SceneType",description:e=>e===1?"A directly photographed image":"Unknown"},41730:{name:"CFAPattern",description:()=>"[Raw CFA pattern table data]"},41985:{name:"CustomRendered",description:e=>e===0?"Normal process":e===1?"Custom process":"Unknown"},41986:{name:"ExposureMode",description:e=>e===0?"Auto exposure":e===1?"Manual exposure":e===2?"Auto bracket":"Unknown"},41987:{name:"WhiteBalance",description:e=>e===0?"Auto white balance":e===1?"Manual white balance":"Unknown"},41988:{name:"DigitalZoomRatio",description:e=>e[0]===0?"Digital zoom was not used":""+e[0]/e[1]},41989:{name:"FocalLengthIn35mmFilm",description:e=>e===0?"Unknown":e},41990:{name:"SceneCaptureType",description:e=>e===0?"Standard":e===1?"Landscape":e===2?"Portrait":e===3?"Night scene":"Unknown"},41991:{name:"GainControl",description:e=>e===0?"None":e===1?"Low gain up":e===2?"High gain up":e===3?"Low gain down":e===4?"High gain down":"Unknown"},41992:{name:"Contrast",description:e=>e===0?"Normal":e===1?"Soft":e===2?"Hard":"Unknown"},41993:{name:"Saturation",description:e=>e===0?"Normal":e===1?"Low saturation":e===2?"High saturation":"Unknown"},41994:{name:"Sharpness",description:e=>e===0?"Normal":e===1?"Soft":e===2?"Hard":"Unknown"},41995:{name:"DeviceSettingDescription",description:()=>"[Raw device settings table data]"},41996:{name:"SubjectDistanceRange",description:e=>e===1?"Macro":e===2?"Close view":e===3?"Distant view":"Unknown"},42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:{name:"LensSpecification",description:e=>{let t=`${e[0][0]/e[0][1]}-${e[1][0]/e[1][1]} mm`;return e[3][1]===0?`${t} f/?`:`${t} f/${1/(e[2][1]/e[2][1]/(e[3][0]/e[3][1]))}`}},42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",42080:{name:"CompositeImage",description:e=>({1:"Not a Composite Image",2:"General Composite Image",3:"Composite Image Captured While Shooting"})[e]||"Unknown"},42081:"SourceImageNumberOfCompositeImage",42082:"SourceExposureTimesOfCompositeImage",42240:"Gamma",59932:"Padding",59933:"OffsetSchema",65e3:"OwnerName",65001:"SerialNumber",65002:"Lens",65100:"RawFile",65101:"Converter",65102:"WhiteBalance",65105:"Exposure",65106:"Shadows",65107:"Brightness",65108:"Contrast",65109:"Saturation",65110:"Sharpness",65111:"Smoothness",65112:"MoireFilter"};var Je={0:{name:"GPSVersionID",description:e=>e[0]===2&&e[1]===2&&e[2]===0&&e[3]===0?"Version 2.2":"Unknown"},1:{name:"GPSLatitudeRef",description:e=>{let t=e.join("");return t==="N"?"North latitude":t==="S"?"South latitude":"Unknown"}},2:{name:"GPSLatitude",description:O},3:{name:"GPSLongitudeRef",description:e=>{let t=e.join("");return t==="E"?"East longitude":t==="W"?"West longitude":"Unknown"}},4:{name:"GPSLongitude",description:O},5:{name:"GPSAltitudeRef",description:e=>e===0?"Sea level":e===1?"Sea level reference (negative value)":"Unknown"},6:{name:"GPSAltitude",description:e=>e[0]/e[1]+" m"},7:{name:"GPSTimeStamp",description:e=>e.map(([t,n])=>{let r=t/n;return/^\d(\.|$)/.test(`${r}`)?`0${r}`:r}).join(":")},8:"GPSSatellites",9:{name:"GPSStatus",description:e=>{let t=e.join("");return t==="A"?"Measurement in progress":t==="V"?"Measurement Interoperability":"Unknown"}},10:{name:"GPSMeasureMode",description:e=>{let t=e.join("");return t==="2"?"2-dimensional measurement":t==="3"?"3-dimensional measurement":"Unknown"}},11:"GPSDOP",12:{name:"GPSSpeedRef",description:e=>{let t=e.join("");return t==="K"?"Kilometers per hour":t==="M"?"Miles per hour":t==="N"?"Knots":"Unknown"}},13:"GPSSpeed",14:{name:"GPSTrackRef",description:e=>{let t=e.join("");return t==="T"?"True direction":t==="M"?"Magnetic direction":"Unknown"}},15:"GPSTrack",16:{name:"GPSImgDirectionRef",description:e=>{let t=e.join("");return t==="T"?"True direction":t==="M"?"Magnetic direction":"Unknown"}},17:"GPSImgDirection",18:"GPSMapDatum",19:{name:"GPSDestLatitudeRef",description:e=>{let t=e.join("");return t==="N"?"North latitude":t==="S"?"South latitude":"Unknown"}},20:{name:"GPSDestLatitude",description:e=>e[0][0]/e[0][1]+e[1][0]/e[1][1]/60+e[2][0]/e[2][1]/3600},21:{name:"GPSDestLongitudeRef",description:e=>{let t=e.join("");return t==="E"?"East longitude":t==="W"?"West longitude":"Unknown"}},22:{name:"GPSDestLongitude",description:e=>e[0][0]/e[0][1]+e[1][0]/e[1][1]/60+e[2][0]/e[2][1]/3600},23:{name:"GPSDestBearingRef",description:e=>{let t=e.join("");return t==="T"?"True direction":t==="M"?"Magnetic direction":"Unknown"}},24:"GPSDestBearing",25:{name:"GPSDestDistanceRef",description:e=>{let t=e.join("");return t==="K"?"Kilometers":t==="M"?"Miles":t==="N"?"Knots":"Unknown"}},26:"GPSDestDistance",27:{name:"GPSProcessingMethod",description:R},28:{name:"GPSAreaInformation",description:R},29:"GPSDateStamp",30:{name:"GPSDifferential",description:e=>e===0?"Measurement without differential correction":e===1?"Differential correction applied":"Unknown"},31:"GPSHPositioningError"};var qe={1:"InteroperabilityIndex",2:{name:"InteroperabilityVersion",description:e=>I(e)},4096:"RelatedImageFileFormat",4097:"RelatedImageWidth",4098:"RelatedImageHeight"};var ve={45056:{name:"MPFVersion",description:e=>I(e)},45057:"NumberOfImages",45058:"MPEntry",45059:"ImageUIDList",45060:"TotalFrames"};var Ve=h({},Qe,$e),P={"0th":Ve,exif:Ve,gps:Je,interoperability:qe,mpf:l.USE_MPF?ve:{}};var et="Exif IFD Pointer",tt="GPS Info IFD Pointer",nt="Interoperability IFD Pointer",nr={1:a.getByteAt,2:a.getAsciiAt,3:a.getShortAt,4:a.getLongAt,5:a.getRationalAt,7:a.getUndefinedAt,9:a.getSlongAt,10:a.getSrationalAt,13:a.getIfdPointerAt},de={read:rr,readMpf:cr};function rr(e,t,n){let r=b.getByteOrder(e,t),i=ir(e,t,r,n);return i=or(i,e,t,r,n),i=sr(i,e,t,r,n),i=ur(i,e,t,r,n),i}function ir(e,t,n,r){return U(e,"0th",t,ot(e,t,n),n,r)}function ot(e,t,n){return t+a.getLongAt(e,t+4,n)}function or(e,t,n,r,i){return e[et]!==void 0?h(e,U(t,"exif",n,n+e[et].value,r,i)):e}function sr(e,t,n,r,i){return e[tt]!==void 0?h(e,U(t,"gps",n,n+e[tt].value,r,i)):e}function ur(e,t,n,r,i){return e[nt]!==void 0?h(e,U(t,"interoperability",n,n+e[nt].value,r,i)):e}function cr(e,t,n){let r=b.getByteOrder(e,t),i=U(e,"mpf",t,ot(e,t,r),r,n);return ar(e,t,i,r)}function ar(e,t,n,r){if(!n.MPEntry)return n;let o=[];for(let s=0;s<Math.ceil(n.MPEntry.value.length/16);s++){o[s]={};let u=L(n.MPEntry.value,s*16,a.getTypeSize("LONG"),r);o[s].ImageFlags=fr(u),o[s].ImageFormat=lr(u),o[s].ImageType=dr(u);let f=L(n.MPEntry.value,s*16+4,a.getTypeSize("LONG"),r);o[s].ImageSize={value:f,description:""+f};let d=mr(s)?0:L(n.MPEntry.value,s*16+8,a.getTypeSize("LONG"),r)+t;o[s].ImageOffset={value:d,description:""+d};let c=L(n.MPEntry.value,s*16+12,a.getTypeSize("SHORT"),r);o[s].DependentImage1EntryNumber={value:c,description:""+c};let g=L(n.MPEntry.value,s*16+14,a.getTypeSize("SHORT"),r);o[s].DependentImage2EntryNumber={value:g,description:""+g},o[s].image=e.buffer.slice(d,d+f),z(o[s],"base64",function(){return W(this.image)})}return n.Images=o,n}function L(e,t,n,r){if(r===b.LITTLE_ENDIAN){let o=0;for(let s=0;s<n;s++)o+=e[t+s]<<8*s;return o}let i=0;for(let o=0;o<n;o++)i+=e[t+o]<<8*(n-1-o);return i}function fr(e){let t=[e>>31&1,e>>30&1,e>>29&1],n=[];return t[0]&&n.push("Dependent Parent Image"),t[1]&&n.push("Dependent Child Image"),t[2]&&n.push("Representative Image"),{value:t,description:n.join(", ")||"None"}}function lr(e){let t=e>>24&7;return{value:t,description:t===0?"JPEG":"Unknown"}}function dr(e){let t=e&16777215;return{value:t,description:{196608:"Baseline MP Primary Image",65537:"Large Thumbnail (VGA equivalent)",65538:"Large Thumbnail (Full HD equivalent)",131073:"Multi-Frame Image (Panorama)",131074:"Multi-Frame Image (Disparity)",131075:"Multi-Frame Image (Multi-Angle)",0:"Undefined"}[t]||"Unknown"}}function mr(e){return e===0}function U(e,t,n,r,i,o){let s=a.getTypeSize("SHORT"),u=12,f={},d=gr(e,r,i);r+=s;for(let c=0;c<d&&!(r+u>e.byteLength);c++){let g=pr(e,t,n,r,i,o);g!==void 0&&(f[g.name]={id:g.id,value:g.value,description:g.description}),r+=u}if(l.USE_THUMBNAIL&&r<e.byteLength-a.getTypeSize("LONG")){let c=a.getLongAt(e,r,i);c!==0&&(f.Thumbnail=U(e,t,n,n+c,i,!0))}return f}function gr(e,t,n){return t+a.getTypeSize("SHORT")<=e.byteLength?a.getShortAt(e,t,n):0}function pr(e,t,n,r,i,o){let u=a.getTypeSize("SHORT"),f=u+a.getTypeSize("SHORT"),d=f+a.getTypeSize("LONG"),c=a.getShortAt(e,r,i),g=a.getShortAt(e,r+u,i),x=a.getLongAt(e,r+f,i),E;if(a.typeSizes[g]===void 0||!o&&P[t][c]===void 0)return;if(Er(g,x))E=rt(e,r+d,g,x,i);else{let A=a.getLongAt(e,r+d,i);if(xr(e,n,A,g,x)){let F=c===33723;E=rt(e,n+A,g,x,i,F)}else E="<faulty value>"}g===a.tagTypes.ASCII&&(E=Sr(E),E=hr(E));let m=`undefined-${c}`,S=E;if(P[t][c]!==void 0)if(P[t][c].name!==void 0&&P[t][c].description!==void 0){m=P[t][c].name;try{S=P[t][c].description(E)}catch{S=it(E)}}else g===a.tagTypes.RATIONAL||g===a.tagTypes.SRATIONAL?(m=P[t][c],S=""+E[0]/E[1]):(m=P[t][c],S=it(E));return{id:c,name:m,value:E,description:S}}function Er(e,t){return a.typeSizes[e]*t<=a.getTypeSize("LONG")}function rt(e,t,n,r,i,o=!1){let s=[];o&&(r=r*a.typeSizes[n],n=a.tagTypes.BYTE);for(let u=0;u<r;u++)s.push(nr[n](e,t,i)),t+=a.typeSizes[n];return n===a.tagTypes.ASCII?s=a.getAsciiValue(s):s.length===1&&(s=s[0]),s}function xr(e,t,n,r,i){return t+n+a.typeSizes[r]*i<=e.byteLength}function Sr(e){let t=[],n=0;for(let r=0;r<e.length;r++){if(e[r]==="\0"){n++;continue}t[n]===void 0&&(t[n]=""),t[n]+=e[r]}return t}function hr(e){try{return e.map(t=>decodeURIComponent(escape(t)))}catch{return e}}function it(e){return e instanceof Array?e.join(", "):e}var st={read:Ir};function Ir(e,t){let n=Ar(e,t),r=Cr(e,t,n);return{"Bits Per Sample":Tr(e,t,n),"Image Height":Fr(e,t,n),"Image Width":_r(e,t,n),"Color Components":r,Subsampling:r&&br(e,t,r.value,n)}}function Ar(e,t){return a.getShortAt(e,t)}function Tr(e,t,n){if(2+1>n)return;let o=a.getByteAt(e,t+2);return{value:o,description:""+o}}function Fr(e,t,n){if(3+2>n)return;let o=a.getShortAt(e,t+3);return{value:o,description:`${o}px`}}function _r(e,t,n){if(5+2>n)return;let o=a.getShortAt(e,t+5);return{value:o,description:`${o}px`}}function Cr(e,t,n){if(7+1>n)return;let o=a.getByteAt(e,t+7);return{value:o,description:""+o}}function br(e,t,n,r){let o=3*n;if(8+o>r)return;let s=[];for(let u=0;u<n;u++){let f=t+8+u*3;s.push([a.getByteAt(e,f),a.getByteAt(e,f+1),a.getByteAt(e,f+2)])}return{value:s,description:s.length>1?Pr(s)+Nr(s):""}}function Pr(e){let t={1:"Y",2:"Cb",3:"Cr",4:"I",5:"Q"};return e.map(n=>t[n[0]]).join("")}function Nr(e){let t={17:"4:4:4 (1 1)",18:"4:4:0 (1 2)",20:"4:4:1 (1 4)",33:"4:2:2 (2 1)",34:"4:2:0 (2 2)",36:"4:2:1 (2 4)",65:"4:1:1 (4 1)",66:"4:1:0 (4 2)"};return e.length===0||e[0][1]===void 0||t[e[0][1]]===void 0?"":t[e[0][1]]}var ut={read:yr};function yr(e,t){let n=Or(e,t),r=Br(e,t,n),i=Gr(e,t,n),o={"JFIF Version":Ur(e,t,n),"Resolution Unit":Rr(e,t,n),XResolution:Mr(e,t,n),YResolution:Lr(e,t,n),"JFIF Thumbnail Width":r,"JFIF Thumbnail Height":i};if(r!==void 0&&i!==void 0){let s=kr(e,t,3*r.value*i.value,n);s&&(o["JFIF Thumbnail"]=s)}for(let s in o)o[s]===void 0&&delete o[s];return o}function Or(e,t){return a.getShortAt(e,t)}function Ur(e,t,n){if(7+2>n)return;let o=a.getByteAt(e,t+7),s=a.getByteAt(e,t+7+1);return{value:o*256+s,description:o+"."+s}}function Rr(e,t,n){if(9+1>n)return;let o=a.getByteAt(e,t+9);return{value:o,description:Dr(o)}}function Dr(e){return e===0?"None":e===1?"inches":e===2?"cm":"Unknown"}function Mr(e,t,n){if(10+2>n)return;let o=a.getShortAt(e,t+10);return{value:o,description:""+o}}function Lr(e,t,n){if(12+2>n)return;let o=a.getShortAt(e,t+12);return{value:o,description:""+o}}function Br(e,t,n){if(14+1>n)return;let o=a.getByteAt(e,t+14);return{value:o,description:`${o}px`}}function Gr(e,t,n){if(15+1>n)return;let o=a.getByteAt(e,t+15);return{value:o,description:`${o}px`}}function kr(e,t,n,r){return n===0||16+n>r?void 0:{value:e.buffer.slice(t+16,t+16+n),description:"<24-bit RGB pixel data>"}}var N={iptc:{256:{name:"Model Version",description:e=>((e[0]<<8)+e[1]).toString()},261:{name:"Destination",repeatable:!0},276:{name:"File Format",description:e=>((e[0]<<8)+e[1]).toString()},278:{name:"File Format Version",description:e=>((e[0]<<8)+e[1]).toString()},286:"Service Identifier",296:"Envelope Number",306:"Product ID",316:"Envelope Priority",326:{name:"Date Sent",description:me},336:{name:"Time Sent",description:ge},346:{name:"Coded Character Set",description:ct,encoding_name:ct},356:"UNO",376:{name:"ARM Identifier",description:e=>((e[0]<<8)+e[1]).toString()},378:{name:"ARM Version",description:e=>((e[0]<<8)+e[1]).toString()},512:{name:"Record Version",description:e=>((e[0]<<8)+e[1]).toString()},515:"Object Type Reference",516:"Object Attribute Reference",517:"Object Name",519:"Edit Status",520:{name:"Editorial Update",description:e=>I(e)==="01"?"Additional Language":"Unknown"},522:"Urgency",524:{name:"Subject Reference",repeatable:!0,description:e=>{let t=I(e).split(":");return t[2]+(t[3]?"/"+t[3]:"")+(t[4]?"/"+t[4]:"")}},527:"Category",532:{name:"Supplemental Category",repeatable:!0},534:"Fixture Identifier",537:{name:"Keywords",repeatable:!0},538:{name:"Content Location Code",repeatable:!0},539:{name:"Content Location Name",repeatable:!0},542:"Release Date",547:"Release Time",549:"Expiration Date",550:"Expiration Time",552:"Special Instructions",554:{name:"Action Advised",description:e=>{let t=I(e);return t==="01"?"Object Kill":t==="02"?"Object Replace":t==="03"?"Object Append":t==="04"?"Object Reference":"Unknown"}},557:{name:"Reference Service",repeatable:!0},559:{name:"Reference Date",repeatable:!0},562:{name:"Reference Number",repeatable:!0},567:{name:"Date Created",description:me},572:{name:"Time Created",description:ge},574:{name:"Digital Creation Date",description:me},575:{name:"Digital Creation Time",description:ge},577:"Originating Program",582:"Program Version",587:{name:"Object Cycle",description:e=>{let t=I(e);return t==="a"?"morning":t==="p"?"evening":t==="b"?"both":"Unknown"}},592:{name:"By-line",repeatable:!0},597:{name:"By-line Title",repeatable:!0},602:"City",604:"Sub-location",607:"Province/State",612:"Country/Primary Location Code",613:"Country/Primary Location Name",615:"Original Transmission Reference",617:"Headline",622:"Credit",627:"Source",628:"Copyright Notice",630:{name:"Contact",repeatable:!0},632:"Caption/Abstract",634:{name:"Writer/Editor",repeatable:!0},637:{name:"Rasterized Caption",description:e=>e},642:"Image Type",643:{name:"Image Orientation",description:e=>{let t=I(e);return t==="P"?"Portrait":t==="L"?"Landscape":t==="S"?"Square":"Unknown"}},647:"Language Identifier",662:{name:"Audio Type",description:e=>{let t=I(e),n=t.charAt(0),r=t.charAt(1),i="";return n==="1"?i+="Mono":n==="2"&&(i+="Stereo"),r==="A"?i+=", actuality":r==="C"?i+=", question and answer session":r==="M"?i+=", music, transmitted by itself":r==="Q"?i+=", response to a question":r==="R"?i+=", raw sound":r==="S"?i+=", scener":r==="V"?i+=", voicer":r==="W"&&(i+=", wrap"),i!==""?i:t}},663:{name:"Audio Sampling Rate",description:e=>parseInt(I(e),10)+" Hz"},664:{name:"Audio Sampling Resolution",description:e=>{let t=parseInt(I(e),10);return t+(t===1?" bit":" bits")}},665:{name:"Audio Duration",description:e=>{let t=I(e);return t.length>=6?t.substr(0,2)+":"+t.substr(2,2)+":"+t.substr(4,2):t}},666:"Audio Outcue",698:"Short Document ID",699:"Unique Document ID",700:"Owner ID",712:{name:e=>e.length===2?"ObjectData Preview File Format":"Record 2 destination",description:e=>{if(e.length===2){let t=(e[0]<<8)+e[1];return t===0?"No ObjectData":t===1?"IPTC-NAA Digital Newsphoto Parameter Record":t===2?"IPTC7901 Recommended Message Format":t===3?"Tagged Image File Format (Adobe/Aldus Image data)":t===4?"Illustrator (Adobe Graphics data)":t===5?"AppleSingle (Apple Computer Inc)":t===6?"NAA 89-3 (ANPA 1312)":t===7?"MacBinary II":t===8?"IPTC Unstructured Character Oriented File Format (UCOFF)":t===9?"United Press International ANPA 1312 variant":t===10?"United Press International Down-Load Message":t===11?"JPEG File Interchange (JFIF)":t===12?"Photo-CD Image-Pac (Eastman Kodak)":t===13?"Microsoft Bit Mapped Graphics File [*.BMP]":t===14?"Digital Audio File [*.WAV] (Microsoft & Creative Labs)":t===15?"Audio plus Moving Video [*.AVI] (Microsoft)":t===16?"PC DOS/Windows Executable Files [*.COM][*.EXE]":t===17?"Compressed Binary File [*.ZIP] (PKWare Inc)":t===18?"Audio Interchange File Format AIFF (Apple Computer Inc)":t===19?"RIFF Wave (Microsoft Corporation)":t===20?"Freehand (Macromedia/Aldus)":t===21?'Hypertext Markup Language "HTML" (The Internet Society)':t===22?"MPEG 2 Audio Layer 2 (Musicom), ISO/IEC":t===23?"MPEG 2 Audio Layer 3, ISO/IEC":t===24?"Portable Document File (*.PDF) Adobe":t===25?"News Industry Text Format (NITF)":t===26?"Tape Archive (*.TAR)":t===27?"Tidningarnas Telegrambyr\xE5 NITF version (TTNITF DTD)":t===28?"Ritzaus Bureau NITF version (RBNITF DTD)":t===29?"Corel Draw [*.CDR]":`Unknown format ${t}`}return I(e)}},713:{name:"ObjectData Preview File Format Version",description:(e,t)=>{let n={"00":{"00":"1"},"01":{"01":"1","02":"2","03":"3","04":"4"},"02":{"04":"4"},"03":{"01":"5.0","02":"6.0"},"04":{"01":"1.40"},"05":{"01":"2"},"06":{"01":"1"},"11":{"01":"1.02"},"20":{"01":"3.1","02":"4.0","03":"5.0","04":"5.5"},"21":{"02":"2.0"}},r=I(e);if(t["ObjectData Preview File Format"]){let i=I(t["ObjectData Preview File Format"].value);if(n[i]&&n[i][r])return n[i][r]}return r}},714:"ObjectData Preview Data",1802:{name:"Size Mode",description:e=>e[0].toString()},1812:{name:"Max Subfile Size",description:e=>{let t=0;for(let n=0;n<e.length;n++)t=(t<<8)+e[n];return t.toString()}},1882:{name:"ObjectData Size Announced",description:e=>{let t=0;for(let n=0;n<e.length;n++)t=(t<<8)+e[n];return t.toString()}},1887:{name:"Maximum ObjectData Size",description:e=>{let t=0;for(let n=0;n<e.length;n++)t=(t<<8)+e[n];return t.toString()}}}};function me(e){let t=I(e);return t.length>=8?t.substr(0,4)+"-"+t.substr(4,2)+"-"+t.substr(6,2):t}function ge(e){let t=I(e),n=t;return t.length>=6&&(n=t.substr(0,2)+":"+t.substr(2,2)+":"+t.substr(4,2),t.length===11&&(n+=t.substr(6,1)+t.substr(7,2)+":"+t.substr(9,2))),n}function ct(e){let t=I(e);return t==="\x1B%G"?"UTF-8":t==="\x1B%5"?"Windows-1252":t==="\x1B%/G"?"UTF-8 Level 1":t==="\x1B%/H"?"UTF-8 Level 2":t==="\x1B%/I"?"UTF-8 Level 3":t==="\x1B/A"?"ISO-8859-1":t==="\x1B/B"?"ISO-8859-2":t==="\x1B/C"?"ISO-8859-3":t==="\x1B/D"?"ISO-8859-4":t==="\x1B/@"?"ISO-8859-5":t==="\x1B/G"?"ISO-8859-6":t==="\x1B/F"?"ISO-8859-7":t==="\x1B/H"?"ISO-8859-8":"Unknown"}var at={get:wr};function wr(){if(typeof TextDecoder<"u")return TextDecoder}var Hr=5,ft={decode:Zr,TAG_HEADER_SIZE:Hr};function Zr(e,t){let n=at.get();if(typeof n<"u"&&e!==void 0)try{return new n(e).decode(Uint8Array.from(t))}catch{}let r=t.map(i=>String.fromCharCode(i)).join("");return Xr(r)}function Xr(e){try{return decodeURIComponent(escape(e))}catch{return e}}var zr=943868237,dt=4,pe=dt+8,Wr=1028,mt=5,Ee={read:Kr};function Kr(e,t,n){try{if(Array.isArray(e))return lt(new DataView(Uint8Array.from(e).buffer),{size:e.length},0,n);let{naaBlock:r,dataOffset:i}=jr(e,t);return lt(e,r,i,n)}catch{return{}}}function jr(e,t){for(;t+pe<=e.byteLength;){let n=Yr(e,t);if(Qr(n))return{naaBlock:n,dataOffset:t+pe};t+=pe+n.size+$r(n)}throw new Error("No IPTC NAA resource block.")}function Yr(e,t){if(e.getUint32(t,!1)!==zr)throw new Error("Not an IPTC resource block.");return{type:e.getUint16(t+dt),size:e.getUint16(t+10)}}function Qr(e){return e.type===Wr}function $r(e){return e.size%2!==0?1:0}function lt(e,t,n,r){let i={},o,s=n+t.size;for(;n<s&&n<e.byteLength;){let{tag:u,tagSize:f}=Jr(e,n,i,o,r);if(u===null)break;u&&("encoding"in u&&(o=u.encoding),i[u.name]===void 0||u.repeatable===void 0?i[u.name]={id:u.id,value:u.value,description:u.description}:(i[u.name]instanceof Array||(i[u.name]=[{id:i[u.name].id,value:i[u.name].value,description:i[u.name].description}]),i[u.name].push({id:u.id,value:u.value,description:u.description}))),n+=mt+f}return i}function Jr(e,t,n,r,i){if(qr(e,t))return{tag:null,tagSize:0};let u=e.getUint16(t+1),f=e.getUint16(t+3);if(!i&&!N.iptc[u])return{tag:void 0,tagSize:f};let d=vr(e,t+mt,f),c={id:u,name:Vr(N.iptc[u],u,d),value:d,description:ni(N.iptc[u],d,n,r)};return oi(u)&&(c.repeatable=!0),si(u)&&(c.encoding=N.iptc[u].encoding_name(d)),{tag:c,tagSize:f}}function qr(e,t){return e.getUint8(t)!==28}function vr(e,t,n){let r=[];for(let i=0;i<n;i++)r.push(e.getUint8(t+i));return r}function Vr(e,t,n){return e?ei(e)?e:ti(e)?e.name(n):e.name:`undefined-${t}`}function ei(e){return typeof e=="string"}function ti(e){return typeof e.name=="function"}function ni(e,t,n,r){if(ii(e))try{return e.description(t,n)}catch{}return ri(e,t)?ft.decode(r,t):t}function ri(e,t){return e&&t instanceof Array}function ii(e){return e&&e.description!==void 0}function oi(e){return N.iptc[e]&&N.iptc[e].repeatable}function si(e){return N.iptc[e]&&N.iptc[e].encoding_name!==void 0}var xe={"tiff:Orientation"(e){return e==="1"?"Horizontal (normal)":e==="2"?"Mirror horizontal":e==="3"?"Rotate 180":e==="4"?"Mirror vertical":e==="5"?"Mirror horizontal and rotate 270 CW":e==="6"?"Rotate 90 CW":e==="7"?"Mirror horizontal and rotate 90 CW":e==="8"?"Rotate 270 CW":e},"exif:GPSLatitude":gt,"exif:GPSLongitude":gt};function gt(e){let[t,n]=e.split(",");if(t!==void 0&&n!==void 0){let r=parseFloat(t),i=parseFloat(n),o=n.charAt(n.length-1);if(!Number.isNaN(r)&&!Number.isNaN(i))return""+(r+i/60)+o}return e}var pt={get:ui};function ui(){if(typeof DOMParser<"u")return DOMParser;try{return __non_webpack_require__("@xmldom/xmldom").DOMParser}catch{return}}var Se={read:ci};function ci(e,t){return typeof e=="string"?xt({},e):ai(e,t).reduce(xt,{})}function ai(e,t){if(t.length===0)return[];let n=[Et(e,t.slice(0,1))];return t.length>1&&n.push(Et(e,t.slice(1))),n}function Et(e,t){let n=t.reduce((o,s)=>o+s.length,0),r=new Uint8Array(n),i=0;for(let o=0;o<t.length;o++){let s=t[o],u=e.buffer.slice(s.dataOffset,s.dataOffset+s.length);r.set(new Uint8Array(u),i),i+=s.length}return new DataView(r.buffer)}function xt(e,t){try{let n=fi(t),r=St(n);return h(e,It(ht(r,!0)))}catch{return e}}function fi(e){let t=pt.get();if(!t)throw console.warn("Warning: DOMParser is not available. It is needed to be able to parse XMP tags."),new Error;let n=new t,r=typeof e=="string"?e:p(e,0,e.byteLength),i=n.parseFromString(li(r),"application/xml");if(i.documentElement.nodeName==="parsererror")throw new Error(i.documentElement.textContent);return i}function li(e){return e.replace(/^.+(<\?xpacket begin)/,"$1").replace(/(<\?xpacket end=".*"\?>).+$/,"$1")}function St(e){for(let t=0;t<e.childNodes.length;t++){if(e.childNodes[t].tagName==="x:xmpmeta")return St(e.childNodes[t]);if(e.childNodes[t].tagName==="rdf:RDF")return e.childNodes[t]}throw new Error}function ht(e,t=!1){let n=di(e);return mi(n)?t?{}:gi(n[0]):pi(n)}function di(e){let t=[];for(let n=0;n<e.childNodes.length;n++)t.push(e.childNodes[n]);return t}function mi(e){return e.length===1&&e[0].nodeName==="#text"}function gi(e){return e.nodeValue}function pi(e){let t={};return e.forEach(n=>{if(Ei(n)){let r=xi(n);t[n.nodeName]!==void 0?(Array.isArray(t[n.nodeName])||(t[n.nodeName]=[t[n.nodeName]]),t[n.nodeName].push(r)):t[n.nodeName]=r}}),t}function Ei(e){return e.nodeName&&e.nodeName!=="#text"}function xi(e){return{attributes:Si(e),value:ht(e)}}function Si(e){let t={};for(let n=0;n<e.attributes.length;n++)t[e.attributes[n].nodeName]=decodeURIComponent(escape(e.attributes[n].value));return t}function It(e){let t={};if(typeof e=="string")return e;for(let n in e){let r=e[n];Array.isArray(r)||(r=[r]),r.forEach(i=>{h(t,he(i.attributes)),typeof i.value=="object"&&h(t,At(i.value))})}return t}function he(e){let t={};for(let n in e)hi(n)&&(t[J(n)]={value:e[n],attributes:{},description:y(e[n],n)});return t}function hi(e){return e!=="rdf:parseType"&&!$(e)}function $(e){return e.split(":")[0]==="xmlns"}function J(e){return/^MicrosoftPhoto(_\d+_)?:Rating$/i.test(e)?"RatingPercent":e.split(":")[1]}function y(e,t=void 0){if(Array.isArray(e))return Ii(e);if(typeof e=="object")return Ai(e);try{return t&&typeof xe[t]=="function"?xe[t](e):decodeURIComponent(escape(e))}catch{return e}}function Ii(e){return e.map(t=>t.value!==void 0?y(t.value):y(t)).join(", ")}function Ai(e){let t=[];for(let n in e)t.push(`${Ti(n)}: ${y(e[n].value)}`);return t.join("; ")}function Ti(e){return e==="CiAdrCity"?"CreatorCity":e==="CiAdrCtry"?"CreatorCountry":e==="CiAdrExtadr"?"CreatorAddress":e==="CiAdrPcode"?"CreatorPostalCode":e==="CiAdrRegion"?"CreatorRegion":e==="CiEmailWork"?"CreatorWorkEmail":e==="CiTelWork"?"CreatorWorkPhone":e==="CiUrlWork"?"CreatorWorkUrl":e}function At(e){let t={};for(let n in e)$(n)||(t[J(n)]=Fi(e[n],n));return t}function Fi(e,t){return Tt(e)?Ft(e,t):_t(e)?Ct(e,t):bt(e)?Pt(e,t):bi(e)?Pi(e,t):yt(e,t)}function Tt(e){return e.attributes["rdf:parseType"]==="Resource"&&e.value["rdf:value"]!==void 0||e.value["rdf:Description"]!==void 0&&e.value["rdf:Description"].value["rdf:value"]!==void 0}function Ft(e,t){let n=B(e);e.value["rdf:Description"]!==void 0&&(e=e.value["rdf:Description"]),h(n,B(e),_i(e));let r=Ci(e);return{value:r,attributes:n,description:y(r,t)}}function B(e){let t={};for(let n in e.attributes)n!=="rdf:parseType"&&n!=="rdf:resource"&&!$(n)&&(t[J(n)]=e.attributes[n]);return t}function _i(e){let t={};for(let n in e.value)n!=="rdf:value"&&!$(n)&&(t[J(n)]=e.value[n].value);return t}function Ci(e){return Ot(e.value["rdf:value"])||e.value["rdf:value"].value}function _t(e){return e.attributes["rdf:parseType"]==="Resource"||e.value["rdf:Description"]!==void 0&&e.value["rdf:Description"].value["rdf:value"]===void 0}function Ct(e,t){let n={value:{},attributes:{}};return e.value["rdf:Description"]!==void 0&&(h(n.value,he(e.value["rdf:Description"].attributes)),h(n.attributes,B(e)),e=e.value["rdf:Description"]),h(n.value,At(e.value)),n.description=y(n.value,t),n}function bt(e){return Object.keys(e.value).length===0&&e.attributes["xml:lang"]===void 0&&e.attributes["rdf:resource"]===void 0}function Pt(e,t){let n=he(e.attributes);return{value:n,attributes:{},description:y(n,t)}}function bi(e){return Nt(e.value)!==void 0}function Nt(e){return e["rdf:Bag"]||e["rdf:Seq"]||e["rdf:Alt"]}function Pi(e,t){let n=Nt(e.value).value["rdf:li"],r=B(e),i=[];return n===void 0?n=[]:Array.isArray(n)||(n=[n]),n.forEach(o=>{i.push(Ni(o))}),{value:i,attributes:r,description:y(i,t)}}function Ni(e){return Tt(e)?Ft(e):_t(e)?Ct(e).value:bt(e)?Pt(e).value:yt(e)}function yt(e,t){let n=Ot(e)||It(e.value);return{value:n,attributes:B(e),description:y(n,t)}}function Ot(e){return e.attributes&&e.attributes["rdf:resource"]}var Ae={desc:{name:"ICC Description"},cprt:{name:"ICC Copyright"},dmdd:{name:"ICC Device Model Description"},vued:{name:"ICC Viewing Conditions Description"},dmnd:{name:"ICC Device Manufacturer for Display"},tech:{name:"Technology"}},Te={4:{name:"Preferred CMM type",value:(e,t)=>p(e,t,4),description:e=>e!==null?Ie(e):""},8:{name:"Profile Version",value:(e,t)=>e.getUint8(t).toString(10)+"."+(e.getUint8(t+1)>>4).toString(10)+"."+(e.getUint8(t+1)%16).toString(10)},12:{name:"Profile/Device class",value:(e,t)=>p(e,t,4),description:e=>{switch(e.toLowerCase()){case"scnr":return"Input Device profile";case"mntr":return"Display Device profile";case"prtr":return"Output Device profile";case"link":return"DeviceLink profile";case"abst":return"Abstract profile";case"spac":return"ColorSpace profile";case"nmcl":return"NamedColor profile";case"cenc":return"ColorEncodingSpace profile";case"mid ":return"MultiplexIdentification profile";case"mlnk":return"MultiplexLink profile";case"mvis":return"MultiplexVisualization profile";default:return e}}},16:{name:"Color Space",value:(e,t)=>p(e,t,4)},20:{name:"Connection Space",value:(e,t)=>p(e,t,4)},24:{name:"ICC Profile Date",value:(e,t)=>yi(e,t).toISOString()},36:{name:"ICC Signature",value:(e,t)=>Oi(e.buffer.slice(t,t+4))},40:{name:"Primary Platform",value:(e,t)=>p(e,t,4),description:e=>Ie(e)},48:{name:"Device Manufacturer",value:(e,t)=>p(e,t,4),description:e=>Ie(e)},52:{name:"Device Model Number",value:(e,t)=>p(e,t,4)},64:{name:"Rendering Intent",value:(e,t)=>e.getUint32(t),description:e=>{switch(e){case 0:return"Perceptual";case 1:return"Relative Colorimetric";case 2:return"Saturation";case 3:return"Absolute Colorimetric";default:return e}}},80:{name:"Profile Creator",value:(e,t)=>p(e,t,4)}};function yi(e,t){let n=e.getUint16(t),r=e.getUint16(t+2)-1,i=e.getUint16(t+4),o=e.getUint16(t+6),s=e.getUint16(t+8),u=e.getUint16(t+10);return new Date(Date.UTC(n,r,i,o,s,u))}function Oi(e){return String.fromCharCode.apply(null,new Uint8Array(e))}function Ie(e){switch(e.toLowerCase()){case"appl":return"Apple";case"adbe":return"Adobe";case"msft":return"Microsoft";case"sunw":return"Sun Microsystems";case"sgi":return"Silicon Graphics";case"tgnt":return"Taligent";default:return e}}var Fe={read:wi},Ui=84,Ri=128,Di="acsp",Mi="desc",Li="mluc",Bi="text",Gi="sig ",ki=12;function wi(e,t){try{let n=t.reduce((s,u)=>s+u.length,0),r=new Uint8Array(n),i=0,o=Hi(e);for(let s=1;s<=t.length;s++){let u=t.find(c=>c.chunkNumber===s);if(!u)throw new Error(`ICC chunk ${s} not found`);let f=o.slice(u.offset,u.offset+u.length),d=new Uint8Array(f);r.set(d,i),i+=d.length}return zi(new DataView(r.buffer))}catch{return{}}}function Hi(e){return Array.isArray(e)?new DataView(Uint8Array.from(e).buffer).buffer:e.buffer}function Zi(e){return e.length<Ri+4}function Xi(e,t){return e.length<t+ki}function zi(e){let t=e.buffer,n=e.getUint32();if(e.byteLength!==n)throw new Error("ICC profile length not matching");if(e.length<Ui)throw new Error("ICC profile too short");let r={},i=Object.keys(Te);for(let f=0;f<i.length;f++){let d=i[f],c=Te[d],g=c.value(e,parseInt(d,10)),x=g;c.description&&(x=c.description(g)),r[c.name]={value:g,description:x}}if(q(t.slice(36,40))!==Di)throw new Error("ICC profile: missing signature");if(Zi(t))return r;let s=e.getUint32(128),u=132;for(let f=0;f<s;f++){if(Xi(t,u))return r;let d=p(e,u,4),c=e.getUint32(u+4),g=e.getUint32(u+8);if(c>t.length)return r;let x=p(e,c,4);if(x===Mi){let E=e.getUint32(c+8);if(E>g)return r;let m=q(t.slice(c+12,c+E+11));G(r,d,m)}else if(x===Li){let E=e.getUint32(c+8),m=e.getUint32(c+12),S=c+16,A=[];for(let F=0;F<E;F++){let _=p(e,S+0,2),k=p(e,S+2,2),w=e.getUint32(S+4),H=e.getUint32(S+8),Z=Ne(e,c+H,w);A.push({languageCode:_,countryCode:k,text:Z}),S+=m}if(E===1)G(r,d,A[0].text);else{let F={};for(let _=0;_<A.length;_++)F[`${A[_].languageCode}-${A[_].countryCode}`]=A[_].text;G(r,d,F)}}else if(x===Bi){let E=q(t.slice(c+8,c+g-7));G(r,d,E)}else if(x===Gi){let E=q(t.slice(c+8,c+12));G(r,d,E)}u=u+12}return r}function q(e){return String.fromCharCode.apply(null,new Uint8Array(e))}function G(e,t,n){Ae[t]?e[Ae[t].name]={value:n,description:n}:e[t]={value:n,description:n}}var Ut={read:Wi};function Wi(e,t){return{"Image Width":Ki(e,t),"Image Height":ji(e,t),"Bit Depth":Yi(e,t),"Color Type":Qi(e,t),Compression:$i(e,t),Filter:Ji(e,t),Interlace:qi(e,t)}}function Ki(e,t){if(t+0+4>e.byteLength)return;let i=a.getLongAt(e,t);return{value:i,description:`${i}px`}}function ji(e,t){if(t+4+4>e.byteLength)return;let i=a.getLongAt(e,t+4);return{value:i,description:`${i}px`}}function Yi(e,t){if(t+8+1>e.byteLength)return;let i=a.getByteAt(e,t+8);return{value:i,description:`${i}`}}function Qi(e,t){let i={0:"Grayscale",2:"RGB",3:"Palette",4:"Grayscale with Alpha",6:"RGB with Alpha"};if(t+9+1>e.byteLength)return;let o=a.getByteAt(e,t+9);return{value:o,description:i[o]||"Unknown"}}function $i(e,t){if(t+10+1>e.byteLength)return;let i=a.getByteAt(e,t+10);return{value:i,description:i===0?"Deflate/Inflate":"Unknown"}}function Ji(e,t){if(t+11+1>e.byteLength)return;let i=a.getByteAt(e,t+11);return{value:i,description:i===0?"Adaptive":"Unknown"}}function qi(e,t){let i={0:"Noninterlaced",1:"Adam7 Interlace"};if(t+12+1>e.byteLength)return;let o=a.getByteAt(e,t+12);return{value:o,description:i[o]||"Unknown"}}var vi=[6,7,99],Rt={get:Vi};function Vi(e,t,n){if(eo(t)){t.type="image/jpeg";let r=n+t.JPEGInterchangeFormat.value;t.image=e.buffer.slice(r,r+t.JPEGInterchangeFormatLength.value),z(t,"base64",function(){return W(this.image)})}return t}function eo(e){return e&&(e.Compression===void 0||vi.includes(e.Compression.value))&&e.JPEGInterchangeFormat&&e.JPEGInterchangeFormat.value&&e.JPEGInterchangeFormatLength&&e.JPEGInterchangeFormatLength.value}function Dt(e){this.name="MetadataMissingError",this.message=e||"No Exif data",this.stack=new Error().stack}Dt.prototype=new Error;var Mt={MetadataMissingError:Dt};function kt(e,t){return to(e)?no(e).then(n=>_e(n,t)):co(e)?ao(e).then(n=>_e(n,t)):_e(e,t)}function to(e){return typeof e=="string"}function no(e){return typeof fetch<"u"?ro(e):/^https?:\/\//.test(e)?io(e):so(e)}function ro(e){return fetch(e).then(t=>t.arrayBuffer())}function io(e){return new Promise((t,n)=>{oo(e)(e,i=>{if(i.statusCode>=200&&i.statusCode<=299){let o=[];i.on("data",s=>o.push(Buffer.from(s))),i.on("error",s=>n(s)),i.on("end",()=>t(Buffer.concat(o)))}else n(`Could not fetch file: ${i.statusCode} ${i.statusMessage}`),i.resume()}).on("error",i=>n(i))})}function oo(e){return/^https:\/\//.test(e)?__non_webpack_require__("https").get:__non_webpack_require__("http").get}function so(e){return new Promise((t,n)=>{let r=uo();r.open(e,(i,o)=>{i?n(i):r.stat(e,(s,u)=>{if(s)n(s);else{let f=Buffer.alloc(u.size);r.read(o,{buffer:f},d=>{d?n(d):r.close(o,c=>{c&&console.warn(`Could not close file ${e}:`,c),t(f)})})}})})})}function uo(){try{return __non_webpack_require__("fs")}catch{return}}function co(e){return typeof window<"u"&&typeof File<"u"&&e instanceof File}function ao(e){return new Promise((t,n)=>{let r=new FileReader;r.onload=i=>t(i.target.result),r.onerror=()=>n(r.error),r.readAsArrayBuffer(e)})}function _e(e,t){return fo(e)&&(e=new Uint8Array(e).buffer),mo(lo(e),t)}function fo(e){try{return Buffer.isBuffer(e)}catch{return!1}}function lo(e){try{return new DataView(e)}catch{return new K(e)}}function mo(e,{expanded:t=!1,includeUnknown:n=!1}={expanded:!1,includeUnknown:!1}){let r=!1,i={},{fileDataOffset:o,jfifDataOffset:s,tiffHeaderOffset:u,iptcDataOffset:f,xmpChunks:d,iccChunks:c,mpfDataOffset:g,pngHeaderOffset:x}=Ke.parseAppMarkers(e);if(l.USE_JPEG&&l.USE_FILE&&go(o)){r=!0;let m=st.read(e,o);t?i.file=m:i=h({},i,m)}if(l.USE_JPEG&&l.USE_JFIF&&po(s)){r=!0;let m=ut.read(e,s);t?i.jfif=m:i=h({},i,m)}if(l.USE_EXIF&&Eo(u)){r=!0;let m=de.read(e,u,n);if(m.Thumbnail&&(i.Thumbnail=m.Thumbnail,delete m.Thumbnail),t?(i.exif=m,xo(i)):i=h({},i,m),l.USE_TIFF&&l.USE_IPTC&&m["IPTC-NAA"]&&!Lt(f)){let S=Ee.read(m["IPTC-NAA"].value,0,n);t?i.iptc=S:i=h({},i,S)}if(l.USE_TIFF&&l.USE_XMP&&m.ApplicationNotes&&!Bt(d)){let S=Se.read(X(m.ApplicationNotes.value));t?i.xmp=S:i=h({},i,S)}if(l.USE_TIFF&&l.USE_ICC&&m.ICC_Profile&&!Gt(c)){let S=Fe.read(m.ICC_Profile.value,[{offset:0,length:m.ICC_Profile.value.length,chunkNumber:1,chunksTotal:1}]);t?i.icc=S:i=h({},i,S)}}if(l.USE_JPEG&&l.USE_IPTC&&Lt(f)){r=!0;let m=Ee.read(e,f,n);t?i.iptc=m:i=h({},i,m)}if(l.USE_XMP&&Bt(d)){r=!0;let m=Se.read(e,d);t?i.xmp=m:i=h({},i,m)}if((l.USE_JPEG||l.USE_WEBP)&&l.USE_ICC&&Gt(c)){r=!0;let m=Fe.read(e,c);t?i.icc=m:i=h({},i,m)}if(l.USE_MPF&&So(g)){r=!0;let m=de.readMpf(e,g,n);t?i.mpf=m:i=h({},i,m)}if(l.USE_PNG&&l.USE_PNG_FILE&&ho(x)){r=!0;let m=Ut.read(e,x);t?i.pngFile=m:i=h({},i,m)}let E=(l.USE_JPEG||l.USE_WEBP)&&l.USE_EXIF&&l.USE_THUMBNAIL&&Rt.get(e,i.Thumbnail,u);if(E?(r=!0,i.Thumbnail=E):delete i.Thumbnail,!r)throw new Mt.MetadataMissingError;return i}function go(e){return e!==void 0}function po(e){return e!==void 0}function Eo(e){return e!==void 0}function xo(e){if(e.exif){if(e.exif.GPSLatitude&&e.exif.GPSLatitudeRef)try{e.gps=e.gps||{},e.gps.Latitude=O(e.exif.GPSLatitude.value),e.exif.GPSLatitudeRef.value.join("")==="S"&&(e.gps.Latitude=-e.gps.Latitude)}catch{}if(e.exif.GPSLongitude&&e.exif.GPSLongitudeRef)try{e.gps=e.gps||{},e.gps.Longitude=O(e.exif.GPSLongitude.value),e.exif.GPSLongitudeRef.value.join("")==="W"&&(e.gps.Longitude=-e.gps.Longitude)}catch{}if(e.exif.GPSAltitude&&e.exif.GPSAltitudeRef)try{e.gps=e.gps||{},e.gps.Altitude=e.exif.GPSAltitude.value[0]/e.exif.GPSAltitude.value[1],e.exif.GPSAltitudeRef.value===1&&(e.gps.Altitude=-e.gps.Altitude)}catch{}}}function Lt(e){return e!==void 0}function Bt(e){return Array.isArray(e)&&e.length>0}function Gt(e){return Array.isArray(e)&&e.length>0}function So(e){return e!==void 0}function ho(e){return e!==void 0}function wt(){return document.createElement("img")}function Ht(){return document.createElement("canvas")}function Zt(e){let t=atob(e.split(",")[1]),n=new ArrayBuffer(t.length),r=new Uint8Array(n);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return n}function Xt(e){let t=atob(e.split(",")[1]),n=e.split(",")[0].split(":")[1].split(";")[0],r=new ArrayBuffer(t.length),i=new Uint8Array(r);for(let s=0;s<t.length;s++)i[s]=t.charCodeAt(s);return new Blob([r],{type:n})}function Ao(e,t){let n=t.width/t.height,r=Math.min(t.width,e.maxWidth,n*e.maxHeight);return e.maxSize&&e.maxSize>0&&e.maxSize<t.width*t.height/1e3&&(r=Math.min(r,Math.floor(e.maxSize*1e3/t.height))),e.scaleRatio&&(r=Math.min(r,Math.floor(e.scaleRatio*t.width))),e.debug&&(console.log("browser-image-resizer: original image size = "+t.width+" px (width) X "+t.height+" px (height)"),console.log("browser-image-resizer: scaled image size = "+r+" px (width) X "+Math.floor(r/n)+" px (height)")),r<=0&&(r=1,console.warn("browser-image-resizer: image size is too small")),r}function To(e,t,n,r){let i=e.width,o=e.style.width,s=e.height,u=e.style.height;switch(n>4&&(e.width=s,e.style.width=u,e.height=i,e.style.height=o),n){case 2:t.translate(i,0),t.scale(-1,1);break;case 3:t.translate(i,s),t.rotate(Math.PI);break;case 4:t.translate(0,s),t.scale(1,-1);break;case 5:t.rotate(.5*Math.PI),t.scale(1,-1);break;case 6:t.rotate(.5*Math.PI),t.translate(0,-s);break;case 7:t.rotate(.5*Math.PI),t.translate(i,-s),t.scale(-1,1);break;case 8:t.rotate(-.5*Math.PI),t.translate(-i,0);break}t.drawImage(r,0,0),t.restore()}function Fo(e,t){var s,u,f;let n=document.createElement("canvas"),r=t.outputWidth/e.width;n.width=e.width*r,n.height=e.height*r;let i=(s=e==null?void 0:e.getContext("2d"))==null?void 0:s.getImageData(0,0,e.width,e.height),o=(u=n==null?void 0:n.getContext("2d"))==null?void 0:u.createImageData(n.width,n.height);if(!i||!o)throw Error("Canvas is empty (scaleCanvasWithAlgorithm). You should run this script after th document is ready.");return Co(i,o,r),(f=n==null?void 0:n.getContext("2d"))==null||f.putImageData(o,0,0),n}function _o(e){var n;let t=document.createElement("canvas");return t.width=e.width/2,t.height=e.height/2,(n=t==null?void 0:t.getContext("2d"))==null||n.drawImage(e,0,0,t.width,t.height),t}function Co(e,t,n){function r(Wt,Kt,jt,Yt,v,V){let be=1-v,Pe=1-V;return Wt*be*Pe+Kt*v*Pe+jt*be*V+Yt*v*V}let i,o,s,u,f,d,c,g,x,E,m,S,A,F,_,k,w,H,Z;for(i=0;i<t.height;++i)for(s=i/n,u=Math.floor(s),f=Math.ceil(s)>e.height-1?e.height-1:Math.ceil(s),o=0;o<t.width;++o)d=o/n,c=Math.floor(d),g=Math.ceil(d)>e.width-1?e.width-1:Math.ceil(d),x=(o+t.width*i)*4,E=(c+e.width*u)*4,m=(g+e.width*u)*4,S=(c+e.width*f)*4,A=(g+e.width*f)*4,F=d-c,_=s-u,k=r(e.data[E],e.data[m],e.data[S],e.data[A],F,_),t.data[x]=k,w=r(e.data[E+1],e.data[m+1],e.data[S+1],e.data[A+1],F,_),t.data[x+1]=w,H=r(e.data[E+2],e.data[m+2],e.data[S+2],e.data[A+2],F,_),t.data[x+2]=H,Z=r(e.data[E+3],e.data[m+3],e.data[S+3],e.data[A+3],F,_),t.data[x+3]=Z}function zt({img:e,config:t,orientation:n=1}){let r=Ht();r.width=e.width,r.height=e.height;let i=r==null?void 0:r.getContext("2d");if(!i)throw Error("Canvas is empty (scaleImage). You should run this script after th document is ready.");i.save(),To(r,i,n,e);let o=Ao(t,r);for(;r.width>=2*o;)r=_o(r);r.width>o&&(r=Fo(r,Object.assign(t,{outputWidth:o})));let s=r.toDataURL(t.mimeType,t.quality);return typeof t.onScale=="function"&&t.onScale(s),Xt(s)}var bo={quality:.5,maxWidth:800,maxHeight:600,autoRotate:!0,debug:!1,mimeType:"image/jpeg"};function Pu(e,t){return new Promise((n,r)=>{let i=wt(),o=new FileReader,s=Object.assign({},bo,t);o.onload=function(u){if(!u.target||!u.target.result)return r("cannot load image.");i.onerror=function(){r("cannot load image.")},i.onload=async function(){let f={img:i,config:s,orientation:1};if(s.autoRotate){s.debug&&console.log("browser-image-resizer: detecting image orientation...");let d=Zt(i.src),c;try{c=kt(d).Orientation||null,s.debug&&console.log("browser-image-resizer: image orientation from EXIF tag",c),c&&(f.orientation=await Po(c.value))}catch(g){console.error("browser-image-resizer: Error getting orientation"),console.error(g)}}else s.debug&&console.log("browser-image-resizer: ignoring EXIF orientation tag because autoRotate is false...");try{let d=zt(f);n(d)}catch(d){r(d)}},i.src=typeof u.target.result=="string"?u.target.result:URL.createObjectURL(new Blob([u.target.result],{type:e.type}))};try{o.onerror=function(){r("cannot read image file.")},o.readAsDataURL(e)}catch(u){r(u)}})}var Ce={};function Po(e){return e===1?Promise.resolve(1):new Promise(t=>{switch(Ce["image-orientation-automatic"]){case!0:t(1);break;case!1:t(e);break;default:let n="data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==",r=new Image;r.onload=()=>{let i=r.width===1&&r.height===2;Ce["image-orientation-automatic"]=i,t(i?1:e)},r.onerror=()=>{Ce["image-orientation-automatic"]=!1,t(e)},r.src=n}})}export{Pu as readAndCompressImage};
